<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 모든 SQL문을 mapper태그 안에 작성 -->
<mapper namespace="lectureMapper">
	<resultMap type="com.kh.project.lecture.vo.LectureVO" id="lecture">
		<id column="LEC_ID" property="lecId"/>
		<result column="LEC_NAME" property="lecName"/>
		<result column="LEC_CREDIT" property="lecCredit"/>
		<result column="COLL_NO" property="collNo"/>
		<result column="DEPT_ID" property="deptId"/>
		<result column="PROF_NO" property="profNo"/>
		<result column="ASSI_NO" property="assiNo"/>
		<result column="CREATE_DATE" property="createDate"/>
		<result column="MAX_NO" property="maxNo"/>
		<result column="NOW_NO" property="nowNo"/>
		<result column="LEC_PLAN" property="lecPlan"/>
	</resultMap>
	
	
	
	<insert id="regLecture">
		INSERT INTO LECTURE(
		LEC_ID
			, LEC_NAME
			, LEC_CREDIT
			, COLL_NO
			, DEPT_ID
			, PROF_NO
			, ASSI_NO
			, LEC_PLAN
		) VALUES (
		(SELECT 'LEC_'||LPAD(NVL(MAX(TO_NUMBER(SUBSTR(LEC_ID, 5, 3))), 0)+1, 3, '0') FROM LECTURE) 
			, #{lecName}
			, #{lecCredit}
			, #{collNo}
			, #{deptId}
			, #{profNo}
			, #{assiNo}
			, #{lecPlan}
		)
	</insert>
	
	<select id="selectLectureList" resultMap="lecture">
		SELECT LEC_ID
			, LEC_NAME
			, LEC_CREDIT
		FROM LECTURE
	</select>
	
	<delete id="deleteLecture">
		DELETE LECTURE
		WHERE LEC_ID = #{lecId}
	</delete>
	
	
</mapper>












