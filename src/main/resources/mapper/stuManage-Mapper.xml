<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 모든 SQL문을 mapper태그 안에 작성 -->
<mapper namespace="stuManageMapper">
	<resultMap type="com.kh.project.stuManage.vo.StuManageVO" id="stuManage">
		<id column="STU_NO" property="stuNo"/>
		<result column="STU_YEAR" property="stuYear"/>
		<result column="STU_STATUS" property="stuStatus"/>
		<result column="DEPT_NAME" property="deptName"/>
		<result column="COLL_NAME" property="collName"/>
		<result column="MEM_NAME" property="memName"/>
		<result column="MEM_BIRTH" property="memBirth"/>
		<result column="MINOR_CODE" property="minorCode"/>
	</resultMap>
	
	<select id="selectStopStudy" resultMap="stuManage">
		SELECT STU_NO
		    , M.MEM_NAME
		    , DECODE(STU_YEAR, 1, '1학년', 2, '2학년', 3, '3학년', 4, '4학년') AS STU_YEAR
		    , DECODE(STU_STATUS, 0, '재학', 2, '휴학', 3, '복학', 4, '자퇴', '재적') AS STU_STATUS
		    , DEPT_NAME
		    , COLL_NAME
		    , M.MEM_BIRTH
		    , (SELECT DEPT_NAME
		        FROM DEPT
		        WHERE DEPT_ID = S.MINOR_CODE) AS MINOR_CODE
		FROM STUDENT S, DEPT D, COLLEGE C, MEMBER M
		WHERE S.MAJOR_CODE = D.DEPT_ID
		AND S.COLL_NO = C.COLL_NO
		AND S.MEM_NO = M.MEM_NO
		ORDER BY STU_NO
	</select>
</mapper>












